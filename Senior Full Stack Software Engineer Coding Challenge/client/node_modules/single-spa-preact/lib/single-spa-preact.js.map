{"version":3,"sources":["../src/single-spa-preact.js"],"names":["defaultOpts","preact","rootComponent","domElementGetter","singleSpaPreact","userOpts","Error","opts","bootstrap","bind","mount","unmount","Promise","resolve","props","reject","renderedNode","render","h","getRootDomEl","el"],"mappings":";;;;;;;;;;;;;;;AAAA,IAAMA,WAAW,GAAG;AACnB;AACAC,EAAAA,MAAM,EAAE,IAFW;AAGnBC,EAAAA,aAAa,EAAE,IAHI;AAInBC,EAAAA,gBAAgB,EAAE;AAJC,CAApB;;AAOe,SAASC,eAAT,CAAyBC,QAAzB,EAAmC;AACjD,MAAI,QAAOA,QAAP,MAAoB,QAAxB,EAAkC;AACjC,UAAM,IAAIC,KAAJ,qDAAN;AACA;;AAED,MAAMC,IAAI,qBACNP,WADM,MAENK,QAFM,CAAV;;AAKA,MAAI,CAACE,IAAI,CAACN,MAAV,EAAkB;AACjB,UAAM,IAAIK,KAAJ,gDAAN;AACA;;AAED,MAAI,CAACC,IAAI,CAACL,aAAV,EAAyB;AACxB,UAAM,IAAII,KAAJ,uDAAN;AACA;;AAED,MAAI,CAACC,IAAI,CAACJ,gBAAV,EAA4B;AAC3B,UAAM,IAAIG,KAAJ,mEAAN;AACA;;AAED,SAAO;AACNE,IAAAA,SAAS,EAAEA,SAAS,CAACC,IAAV,CAAe,IAAf,EAAqBF,IAArB,CADL;AAENG,IAAAA,KAAK,EAAEA,KAAK,CAACD,IAAN,CAAW,IAAX,EAAiBF,IAAjB,CAFD;AAGNI,IAAAA,OAAO,EAAEA,OAAO,CAACF,IAAR,CAAa,IAAb,EAAmBF,IAAnB;AAHH,GAAP;AAKA;;AAED,SAASC,SAAT,CAAmBD,IAAnB,EAAyB;AACxB,SAAOK,OAAO,CAACC,OAAR,EAAP;AACA;;AAED,SAASH,KAAT,CAAeH,IAAf,EAAqBO,KAArB,EAA4B;AAC3B,SAAO,IAAIF,OAAJ,CAAY,UAACC,OAAD,EAAUE,MAAV,EAAqB;AACvCR,IAAAA,IAAI,CAACS,YAAL,GAAoBT,IAAI,CAACN,MAAL,CAAYgB,MAAZ,CACnBV,IAAI,CAACN,MAAL,CAAYiB,CAAZ,CAAcX,IAAI,CAACL,aAAnB,EAAkCY,KAAlC,EAAyC,IAAzC,CADmB,EAEnBK,YAAY,CAACZ,IAAD,CAFO,CAApB;AAKAM,IAAAA,OAAO;AACP,GAPM,CAAP;AAQA;;AAED,SAASF,OAAT,CAAiBJ,IAAjB,EAAuB;AACtB,SAAO,IAAIK,OAAJ,CAAY,UAACC,OAAD,EAAUE,MAAV,EAAqB;AACvCR,IAAAA,IAAI,CAACN,MAAL,CAAYgB,MAAZ,CACC,EADD,EACK;AACJE,IAAAA,YAAY,CAACZ,IAAD,CAFb,EAGCA,IAAI,CAACS,YAHN;AAMA,WAAOT,IAAI,CAACS,YAAZ;AAEAH,IAAAA,OAAO;AACP,GAVM,CAAP;AAWA;;AAED,SAASM,YAAT,CAAsBZ,IAAtB,EAA4B;AAC3B,MAAMa,EAAE,GAAGb,IAAI,CAACJ,gBAAL,EAAX;;AAEA,MAAI,CAACiB,EAAL,EAAS;AACR,UAAM,IAAId,KAAJ,mFAAN;AACA;;AAED,SAAOc,EAAP;AACA","sourcesContent":["const defaultOpts = {\n\t// required opts\n\tpreact: null,\n\trootComponent: null,\n\tdomElementGetter: null,\n}\n\nexport default function singleSpaPreact(userOpts) {\n\tif (typeof userOpts !== 'object') {\n\t\tthrow new Error(`single-spa-preact requires a configuration object`);\n\t}\n\n\tconst opts = {\n\t\t...defaultOpts,\n\t\t...userOpts,\n\t};\n\n\tif (!opts.preact) {\n\t\tthrow new Error(`single-spa-preact must be passed opts.preact`);\n\t}\n\n\tif (!opts.rootComponent) {\n\t\tthrow new Error(`single-spa-preact must be passed opts.rootComponent`);\n\t}\n\n\tif (!opts.domElementGetter) {\n\t\tthrow new Error(`single-spa-preact must be passed opts.domElementGetter function`);\n\t}\n\n\treturn {\n\t\tbootstrap: bootstrap.bind(null, opts),\n\t\tmount: mount.bind(null, opts),\n\t\tunmount: unmount.bind(null, opts),\n\t};\n}\n\nfunction bootstrap(opts) {\n\treturn Promise.resolve();\n}\n\nfunction mount(opts, props) {\n\treturn new Promise((resolve, reject) => {\n\t\topts.renderedNode = opts.preact.render(\n\t\t\topts.preact.h(opts.rootComponent, props, null),\n\t\t\tgetRootDomEl(opts),\n\t\t);\n\n\t\tresolve();\n\t});\n}\n\nfunction unmount(opts) {\n\treturn new Promise((resolve, reject) => {\n\t\topts.preact.render(\n\t\t\t'', // see https://github.com/developit/preact/issues/53\n\t\t\tgetRootDomEl(opts),\n\t\t\topts.renderedNode,\n\t\t);\n\n\t\tdelete opts.renderedNode;\n\n\t\tresolve();\n\t});\n}\n\nfunction getRootDomEl(opts) {\n\tconst el = opts.domElementGetter();\n\n\tif (!el) {\n\t\tthrow new Error(`single-spa-preact: domElementGetter function did not return a valid dom element`);\n\t}\n\n\treturn el;\n}\n"],"file":"single-spa-preact.js"}